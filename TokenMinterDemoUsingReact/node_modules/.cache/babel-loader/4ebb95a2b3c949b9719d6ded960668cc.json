{"ast":null,"code":"var _jsxFileName = \"D:\\\\Blockchain\\\\test-react\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Web3 from 'web3';\nimport TokenMinter from './contracts/TokenMinter.json';\nimport MintLedger from './component/MintLedger';\nimport MintForm from './component/MintForm';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  // constructor(props) {\n  //   super(props);\n  //   console.log(this.props)\n  //   this.state = {\n  //     web3: null,\n  //     account: null,\n  //     tokenMinterContract: null,\n  //     minterLedger: [],\n  //     ownerTextFieldValue: null,\n  //     nameTextFieldValue: null\n  //   }\n  //   if (window.ethereum) {\n  //     //get user's metamask account\n  //     this.state.web3 = new Web3(window.ethereum);\n  //     window.ethereum.request({ method: 'eth_requestAccounts' }).then((accounts) => {\n  //       this.setState({\n  //         account: accounts[0]\n  //       })\n  //     })\n  //     window.ethereum.on('accountsChanged', (accounts) => {\n  //       this.setState({\n  //         account: accounts[0]\n  //       })\n  //     })\n  //   } else {\n  //     //connect to the default provider\n  //     this.state.web3 = new Web3(new Web3.providers.HttpProvider(\"https://rinkeby.infura.io/v3/9b11910966d3430e9846e504d5847593\"))\n  //   }\n  //   const tokenMinterAddress = '0x19A5A6878e66e5E12F04114ca5ef8e94919Ac9C8'\n  //   this.state.tokenMinterContract = new this.state.web3.eth\n  //     .Contract(TokenMinter.abi, tokenMinterAddress)\n  // }\n  // componentDidMount() {\n  //   this.state.tokenMinterContract.methods.getMintHistory().call()\n  //     .then(res => this.setState({ minterLedger: res }) )\n  // }\n  // mintToken = async() => {\n  //   let totalSupply = await this.state.tokenMinterContract.methods.getTotalSupply().call()\n  //   console.log(totalSupply)\n  // }\n  // handleOwnerTextFieldChange = (e) => {\n  //   this.setState({\n  //     ownerTextFieldValue: e.target.value\n  //   })\n  // }\n  // handleNameTextFieldChange = (e) => {\n  //   this.setState({\n  //     nameTextFieldValue: e.target.value\n  //   })\n  // }\n  // renderMinterDiv() {\n  //   if (this.state.account === \"0xf61b13cd9b7e6cc7e3609f604232953ca8614bbc\") {\n  //     return (\n  //       <div class=\"minterdiv\">\n  //         <p>Token's owner: <input id=\"owner\" type=\"text\" onChange={this.handleOwnerTextFieldChange}/></p>\n  //         <p>Token's name: <input id=\"name\" type=\"text\" onChange={this.handleNameTextFieldChange}/></p>\n  //         <p><button onClick={() => this.mintToken()}>Mint</button></p>\n  //       </div>\n  //     );\n  //   } else {\n  //     return ;\n  //   }\n  // }\n  // renderMintLedger() {\n  //   return (\n  //     <MintLedger mintHistory={this.state.minterLedger}/>\n  //   );\n  // }\n  const [account, setAccount] = useState(\"\");\n  const [minterLedger, setMinterLedger] = useState([]);\n  const [web3, setWeb3] = useState();\n\n  if (window.ethereum) {\n    //get user's metamask account\n    setWeb3(new Web3(window.ethereum));\n    window.ethereum.request({\n      method: 'eth_requestAccounts'\n    }).then(accounts => {\n      setAccount(accounts[0]);\n    });\n    window.ethereum.on('accountsChanged', accounts => {\n      setAccount(accounts[0]);\n    });\n  } else {\n    //connect to the default provider\n    setWeb3(new Web3(new Web3.providers.HttpProvider(\"https://rinkeby.infura.io/v3/9b11910966d3430e9846e504d5847593\")));\n  }\n\n  useEffect(async () => {\n    const tokenMinterAddress = '0x19A5A6878e66e5E12F04114ca5ef8e94919Ac9C8';\n    const tokenMinterContract = web3.eth.Contract(TokenMinter.abi, tokenMinterAddress);\n    let history = await tokenMinterContract.methods.getMintHistory().call();\n    setMinterLedger(history);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"TokenMinter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), account === \"0xf61b13cd9b7e6cc7e3609f604232953ca8614bbc\" ? /*#__PURE__*/_jsxDEV(MintForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 65\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Only owner can access to mint function\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 78\n    }, this), minterLedger.length ? /*#__PURE__*/_jsxDEV(MintLedger, {\n      mintHistory: minterLedger\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 28\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Currently loading token minter's ledger\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 69\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"8FC5Sgm1cv6Sjxak7542WN5xWl4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Web3","TokenMinter","MintLedger","MintForm","App","account","setAccount","minterLedger","setMinterLedger","web3","setWeb3","window","ethereum","request","method","then","accounts","on","providers","HttpProvider","tokenMinterAddress","tokenMinterContract","eth","Contract","abi","history","methods","getMintHistory","call","length"],"sources":["D:/Blockchain/test-react/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Web3 from 'web3';\nimport TokenMinter from './contracts/TokenMinter.json'\nimport MintLedger from './component/MintLedger'\nimport MintForm from './component/MintForm'\nimport './App.css';\n\nfunction App () {\n  // constructor(props) {\n  //   super(props);\n\n  //   console.log(this.props)\n    \n  //   this.state = {\n  //     web3: null,\n  //     account: null,\n  //     tokenMinterContract: null,\n  //     minterLedger: [],\n  //     ownerTextFieldValue: null,\n  //     nameTextFieldValue: null\n  //   }\n\n  //   if (window.ethereum) {\n  //     //get user's metamask account\n  //     this.state.web3 = new Web3(window.ethereum);\n  //     window.ethereum.request({ method: 'eth_requestAccounts' }).then((accounts) => {\n  //       this.setState({\n  //         account: accounts[0]\n  //       })\n  //     })\n  \n  //     window.ethereum.on('accountsChanged', (accounts) => {\n  //       this.setState({\n  //         account: accounts[0]\n  //       })\n  //     })\n  //   } else {\n  //     //connect to the default provider\n  //     this.state.web3 = new Web3(new Web3.providers.HttpProvider(\"https://rinkeby.infura.io/v3/9b11910966d3430e9846e504d5847593\"))\n  //   }\n\n  //   const tokenMinterAddress = '0x19A5A6878e66e5E12F04114ca5ef8e94919Ac9C8'\n  //   this.state.tokenMinterContract = new this.state.web3.eth\n  //     .Contract(TokenMinter.abi, tokenMinterAddress)\n  // }\n\n  // componentDidMount() {\n  //   this.state.tokenMinterContract.methods.getMintHistory().call()\n  //     .then(res => this.setState({ minterLedger: res }) )\n  // }\n\n  // mintToken = async() => {\n  //   let totalSupply = await this.state.tokenMinterContract.methods.getTotalSupply().call()\n  //   console.log(totalSupply)\n  // }\n\n  // handleOwnerTextFieldChange = (e) => {\n  //   this.setState({\n  //     ownerTextFieldValue: e.target.value\n  //   })\n  // }\n\n  // handleNameTextFieldChange = (e) => {\n  //   this.setState({\n  //     nameTextFieldValue: e.target.value\n  //   })\n  // }\n\n  // renderMinterDiv() {\n  //   if (this.state.account === \"0xf61b13cd9b7e6cc7e3609f604232953ca8614bbc\") {\n  //     return (\n  //       <div class=\"minterdiv\">\n  //         <p>Token's owner: <input id=\"owner\" type=\"text\" onChange={this.handleOwnerTextFieldChange}/></p>\n  //         <p>Token's name: <input id=\"name\" type=\"text\" onChange={this.handleNameTextFieldChange}/></p>\n  //         <p><button onClick={() => this.mintToken()}>Mint</button></p>\n  //       </div>\n  //     );\n  //   } else {\n  //     return ;\n  //   }\n  // }\n\n  // renderMintLedger() {\n  //   return (\n  //     <MintLedger mintHistory={this.state.minterLedger}/>\n  //   );\n  // }\n\n  const [account, setAccount] = useState(\"\")\n  const [minterLedger, setMinterLedger] = useState([]);\n  const [web3, setWeb3] = useState();\n\n  if (window.ethereum) {\n    //get user's metamask account\n    setWeb3(new Web3(window.ethereum));\n    window.ethereum.request({ method: 'eth_requestAccounts' }).then((accounts) => {\n      setAccount(accounts[0]);\n    })\n  \n    window.ethereum.on('accountsChanged', (accounts) => {\n      setAccount(accounts[0]);\n    })\n  } else {\n    //connect to the default provider\n    setWeb3(new Web3(new Web3.providers.HttpProvider(\"https://rinkeby.infura.io/v3/9b11910966d3430e9846e504d5847593\")))\n  }\n\n  useEffect(async () => {\n    const tokenMinterAddress = '0x19A5A6878e66e5E12F04114ca5ef8e94919Ac9C8';\n    const tokenMinterContract = web3.eth.Contract(TokenMinter.abi, tokenMinterAddress);\n    let history = await tokenMinterContract.methods.getMintHistory().call();\n    setMinterLedger(history);\n  })\n\n  return (\n    <div className=\"App\">\n      <p>\n        TokenMinter\n      </p>\n      {account === \"0xf61b13cd9b7e6cc7e3609f604232953ca8614bbc\"?<MintForm />:<p>Only owner can access to mint function</p>}\n      {minterLedger.length?<MintLedger mintHistory={minterLedger}/>:<p>Currently loading token minter's ledger</p>}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAO,WAAP;;;AAEA,SAASC,GAAT,GAAgB;EAAA;;EACd;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,CAAC,EAAD,CAAhD;EACA,MAAM,CAACU,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,EAAhC;;EAEA,IAAIY,MAAM,CAACC,QAAX,EAAqB;IACnB;IACAF,OAAO,CAAC,IAAIV,IAAJ,CAASW,MAAM,CAACC,QAAhB,CAAD,CAAP;IACAD,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB;MAAEC,MAAM,EAAE;IAAV,CAAxB,EAA2DC,IAA3D,CAAiEC,QAAD,IAAc;MAC5EV,UAAU,CAACU,QAAQ,CAAC,CAAD,CAAT,CAAV;IACD,CAFD;IAIAL,MAAM,CAACC,QAAP,CAAgBK,EAAhB,CAAmB,iBAAnB,EAAuCD,QAAD,IAAc;MAClDV,UAAU,CAACU,QAAQ,CAAC,CAAD,CAAT,CAAV;IACD,CAFD;EAGD,CAVD,MAUO;IACL;IACAN,OAAO,CAAC,IAAIV,IAAJ,CAAS,IAAIA,IAAI,CAACkB,SAAL,CAAeC,YAAnB,CAAgC,+DAAhC,CAAT,CAAD,CAAP;EACD;;EAEDrB,SAAS,CAAC,YAAY;IACpB,MAAMsB,kBAAkB,GAAG,4CAA3B;IACA,MAAMC,mBAAmB,GAAGZ,IAAI,CAACa,GAAL,CAASC,QAAT,CAAkBtB,WAAW,CAACuB,GAA9B,EAAmCJ,kBAAnC,CAA5B;IACA,IAAIK,OAAO,GAAG,MAAMJ,mBAAmB,CAACK,OAApB,CAA4BC,cAA5B,GAA6CC,IAA7C,EAApB;IACApB,eAAe,CAACiB,OAAD,CAAf;EACD,CALQ,CAAT;EAOA,oBACE;IAAK,SAAS,EAAC,KAAf;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,EAIGpB,OAAO,KAAK,4CAAZ,gBAAyD,QAAC,QAAD;MAAA;MAAA;MAAA;IAAA,QAAzD,gBAAsE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAJzE,EAKGE,YAAY,CAACsB,MAAb,gBAAoB,QAAC,UAAD;MAAY,WAAW,EAAEtB;IAAzB;MAAA;MAAA;MAAA;IAAA,QAApB,gBAA6D;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QALhE;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AASD;;GApHQH,G;;KAAAA,G;AAsHT,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}