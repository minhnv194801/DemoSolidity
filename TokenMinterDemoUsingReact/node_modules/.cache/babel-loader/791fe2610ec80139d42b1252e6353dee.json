{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ethereum_types_1 = require(\"ethereum-types\");\n\nvar ethUtil = require(\"ethereumjs-util\");\n\nvar _ = require(\"lodash\");\n\nvar blob_1 = require(\"../abstract_data_types/types/blob\");\n\nvar constants_1 = require(\"../utils/constants\");\n\nvar AddressDataType =\n/** @class */\nfunction (_super) {\n  __extends(AddressDataType, _super);\n\n  function AddressDataType(dataItem, dataTypeFactory) {\n    var _this = _super.call(this, dataItem, dataTypeFactory, AddressDataType._SIZE_KNOWN_AT_COMPILE_TIME) || this;\n\n    if (!AddressDataType.matchType(dataItem.type)) {\n      throw new Error(\"Tried to instantiate Address with bad input: \" + dataItem);\n    }\n\n    return _this;\n  }\n\n  AddressDataType.matchType = function (type) {\n    return type === ethereum_types_1.SolidityTypes.Address;\n  }; // Disable prefer-function-over-method for inherited abstract methods.\n\n  /* tslint:disable prefer-function-over-method */\n\n\n  AddressDataType.prototype.encodeValue = function (value) {\n    if (!ethUtil.isValidAddress(value)) {\n      throw new Error(\"Invalid address: '\" + value + \"'\");\n    }\n\n    var valueBuf = ethUtil.toBuffer(value);\n    var encodedValueBuf = ethUtil.setLengthLeft(valueBuf, constants_1.constants.EVM_WORD_WIDTH_IN_BYTES);\n    return encodedValueBuf;\n  };\n\n  AddressDataType.prototype.decodeValue = function (calldata) {\n    var valueBufPadded = calldata.popWord();\n    var valueBuf = valueBufPadded.slice(AddressDataType._DECODED_ADDRESS_OFFSET_IN_BYTES);\n    var value = ethUtil.bufferToHex(valueBuf);\n\n    var valueLowercase = _.toLower(value);\n\n    return valueLowercase;\n  };\n\n  AddressDataType.prototype.getDefaultValue = function () {\n    return AddressDataType._DEFAULT_VALUE;\n  };\n\n  AddressDataType.prototype.getSignatureType = function () {\n    return ethereum_types_1.SolidityTypes.Address;\n  };\n\n  AddressDataType._SIZE_KNOWN_AT_COMPILE_TIME = true;\n  AddressDataType._ADDRESS_SIZE_IN_BYTES = 20;\n  AddressDataType._DECODED_ADDRESS_OFFSET_IN_BYTES = constants_1.constants.EVM_WORD_WIDTH_IN_BYTES - AddressDataType._ADDRESS_SIZE_IN_BYTES;\n  AddressDataType._DEFAULT_VALUE = '0x0000000000000000000000000000000000000000';\n  return AddressDataType;\n}(blob_1.AbstractBlobDataType);\n\nexports.AddressDataType = AddressDataType;","map":{"version":3,"sources":["../../../../src/abi_encoder/evm_data_types/address.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,gBAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;;AACA,IAAA,CAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AAGA,IAAA,MAAA,GAAA,OAAA,CAAA,mCAAA,CAAA;;AAEA,IAAA,WAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AAEA,IAAA,eAAA;AAAA;AAAA,UAAA,MAAA,EAAA;EAAqC,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA;;EAWjC,SAAA,eAAA,CAAmB,QAAnB,EAAuC,eAAvC,EAAuE;IAAvE,IAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,QAAN,EAAgB,eAAhB,EAAiC,eAAe,CAAC,2BAAjD,KAA6E,IADjF;;IAEI,IAAI,CAAC,eAAe,CAAC,SAAhB,CAA0B,QAAQ,CAAC,IAAnC,CAAL,EAA+C;MAC3C,MAAM,IAAI,KAAJ,CAAU,kDAAgD,QAA1D,CAAN;IACH;;;EACJ;;EATa,eAAA,CAAA,SAAA,GAAd,UAAwB,IAAxB,EAAoC;IAChC,OAAO,IAAI,KAAK,gBAAA,CAAA,aAAA,CAAc,OAA9B;EACH,CAFa,CAPlB,CAkBI;;EACA;;;EACO,eAAA,CAAA,SAAA,CAAA,WAAA,GAAP,UAAmB,KAAnB,EAAgC;IAC5B,IAAI,CAAC,OAAO,CAAC,cAAR,CAAuB,KAAvB,CAAL,EAAoC;MAChC,MAAM,IAAI,KAAJ,CAAU,uBAAqB,KAArB,GAA0B,GAApC,CAAN;IACH;;IACD,IAAM,QAAQ,GAAG,OAAO,CAAC,QAAR,CAAiB,KAAjB,CAAjB;IACA,IAAM,eAAe,GAAG,OAAO,CAAC,aAAR,CAAsB,QAAtB,EAAgC,WAAA,CAAA,SAAA,CAAU,uBAA1C,CAAxB;IACA,OAAO,eAAP;EACH,CAPM;;EASA,eAAA,CAAA,SAAA,CAAA,WAAA,GAAP,UAAmB,QAAnB,EAAwC;IACpC,IAAM,cAAc,GAAG,QAAQ,CAAC,OAAT,EAAvB;IACA,IAAM,QAAQ,GAAG,cAAc,CAAC,KAAf,CAAqB,eAAe,CAAC,gCAArC,CAAjB;IACA,IAAM,KAAK,GAAG,OAAO,CAAC,WAAR,CAAoB,QAApB,CAAd;;IACA,IAAM,cAAc,GAAG,CAAC,CAAC,OAAF,CAAU,KAAV,CAAvB;;IACA,OAAO,cAAP;EACH,CANM;;EAQA,eAAA,CAAA,SAAA,CAAA,eAAA,GAAP,YAAA;IACI,OAAO,eAAe,CAAC,cAAvB;EACH,CAFM;;EAIA,eAAA,CAAA,SAAA,CAAA,gBAAA,GAAP,YAAA;IACI,OAAO,gBAAA,CAAA,aAAA,CAAc,OAArB;EACH,CAFM;;EAxCiB,eAAA,CAAA,2BAAA,GAAuC,IAAvC;EACA,eAAA,CAAA,sBAAA,GAAyB,EAAzB;EACA,eAAA,CAAA,gCAAA,GACpB,WAAA,CAAA,SAAA,CAAU,uBAAV,GAAoC,eAAe,CAAC,sBADhC;EAEA,eAAA,CAAA,cAAA,GAAiB,4CAAjB;EAwC5B,OAAA,eAAA;AAAC,CA7CD,CAAqC,MAAA,CAAA,oBAArC,CAAA;;AAAa,OAAA,CAAA,eAAA,GAAA,eAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethereum_types_1 = require(\"ethereum-types\");\nvar ethUtil = require(\"ethereumjs-util\");\nvar _ = require(\"lodash\");\nvar blob_1 = require(\"../abstract_data_types/types/blob\");\nvar constants_1 = require(\"../utils/constants\");\nvar AddressDataType = /** @class */ (function (_super) {\n    __extends(AddressDataType, _super);\n    function AddressDataType(dataItem, dataTypeFactory) {\n        var _this = _super.call(this, dataItem, dataTypeFactory, AddressDataType._SIZE_KNOWN_AT_COMPILE_TIME) || this;\n        if (!AddressDataType.matchType(dataItem.type)) {\n            throw new Error(\"Tried to instantiate Address with bad input: \" + dataItem);\n        }\n        return _this;\n    }\n    AddressDataType.matchType = function (type) {\n        return type === ethereum_types_1.SolidityTypes.Address;\n    };\n    // Disable prefer-function-over-method for inherited abstract methods.\n    /* tslint:disable prefer-function-over-method */\n    AddressDataType.prototype.encodeValue = function (value) {\n        if (!ethUtil.isValidAddress(value)) {\n            throw new Error(\"Invalid address: '\" + value + \"'\");\n        }\n        var valueBuf = ethUtil.toBuffer(value);\n        var encodedValueBuf = ethUtil.setLengthLeft(valueBuf, constants_1.constants.EVM_WORD_WIDTH_IN_BYTES);\n        return encodedValueBuf;\n    };\n    AddressDataType.prototype.decodeValue = function (calldata) {\n        var valueBufPadded = calldata.popWord();\n        var valueBuf = valueBufPadded.slice(AddressDataType._DECODED_ADDRESS_OFFSET_IN_BYTES);\n        var value = ethUtil.bufferToHex(valueBuf);\n        var valueLowercase = _.toLower(value);\n        return valueLowercase;\n    };\n    AddressDataType.prototype.getDefaultValue = function () {\n        return AddressDataType._DEFAULT_VALUE;\n    };\n    AddressDataType.prototype.getSignatureType = function () {\n        return ethereum_types_1.SolidityTypes.Address;\n    };\n    AddressDataType._SIZE_KNOWN_AT_COMPILE_TIME = true;\n    AddressDataType._ADDRESS_SIZE_IN_BYTES = 20;\n    AddressDataType._DECODED_ADDRESS_OFFSET_IN_BYTES = constants_1.constants.EVM_WORD_WIDTH_IN_BYTES - AddressDataType._ADDRESS_SIZE_IN_BYTES;\n    AddressDataType._DEFAULT_VALUE = '0x0000000000000000000000000000000000000000';\n    return AddressDataType;\n}(blob_1.AbstractBlobDataType));\nexports.AddressDataType = AddressDataType;\n//# sourceMappingURL=address.js.map"]},"metadata":{},"sourceType":"script"}