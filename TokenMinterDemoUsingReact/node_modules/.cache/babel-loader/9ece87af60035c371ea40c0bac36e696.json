{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar ethers_1 = require(\"ethers\");\n\nvar context_1 = __importDefault(require(\"./context\"));\n\nvar manager_1 = __importDefault(require(\"./manager\"));\n\nfunction useWeb3Context() {\n  return react_1.useContext(context_1.default);\n}\n\nexports.useWeb3Context = useWeb3Context;\n\nfunction Web3Provider(_a) {\n  var connectors = _a.connectors,\n      libraryName = _a.libraryName,\n      Web3 = _a.web3Api,\n      children = _a.children;\n\n  var _b = manager_1.default(connectors),\n      active = _b.web3Initialized,\n      web3State = _b.web3State,\n      connector = _b.connector,\n      setConnector = _b.setConnector,\n      setFirstValidConnector = _b.setFirstValidConnector,\n      unsetConnector = _b.unsetConnector,\n      setError = _b.setError;\n\n  var connectorName = web3State.connectorName,\n      provider = web3State.provider,\n      networkId = web3State.networkId,\n      account = web3State.account,\n      error = web3State.error;\n\n  var providerToInject = provider && function () {\n    if (ethers_1.ethers.providers.Provider.isProvider(provider)) {\n      return provider;\n    } else {\n      switch (libraryName) {\n        case 'ethers.js':\n          return new ethers_1.ethers.providers.Web3Provider(provider);\n\n        case 'web3.js':\n          return new Web3(provider);\n\n        case undefined:\n        case null:\n          return provider;\n\n        default:\n          return libraryName(provider);\n      }\n    }\n  }();\n\n  var context = {\n    active: active,\n    connectorName: connectorName,\n    connector: connector,\n    library: providerToInject,\n    networkId: networkId,\n    account: account,\n    error: error,\n    setConnector: setConnector,\n    setFirstValidConnector: setFirstValidConnector,\n    unsetConnector: unsetConnector,\n    setError: setError\n  };\n  return react_1.default.createElement(context_1.default.Provider, {\n    value: context\n  }, children);\n}\n\nexports.default = Web3Provider;\n\nfunction Web3Consumer(_a) {\n  var _b = _a.recreateOnNetworkChange,\n      recreateOnNetworkChange = _b === void 0 ? true : _b,\n      _c = _a.recreateOnAccountChange,\n      recreateOnAccountChange = _c === void 0 ? true : _c,\n      children = _a.children;\n  return react_1.default.createElement(context_1.default.Consumer, null, function (context) {\n    return react_1.default.createElement(react_1.Fragment, {\n      key: recreateOnNetworkChange && context.networkId || undefined\n    }, react_1.default.createElement(react_1.Fragment, {\n      key: recreateOnAccountChange && context.account || undefined\n    }, children(context)));\n  });\n}\n\nexports.Web3Consumer = Web3Consumer;\n\nfunction withWeb3(ComponentToWrap, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.recreateOnNetworkChange,\n      recreateOnNetworkChange = _c === void 0 ? true : _c,\n      _d = _b.recreateOnAccountChange,\n      recreateOnAccountChange = _d === void 0 ? true : _d;\n\n  var WithWeb3 =\n  /** @class */\n  function (_super) {\n    __extends(WithWeb3, _super);\n\n    function WithWeb3() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    WithWeb3.prototype.render = function () {\n      var _this = this;\n\n      return react_1.default.createElement(Web3Consumer, {\n        recreateOnNetworkChange: recreateOnNetworkChange,\n        recreateOnAccountChange: recreateOnAccountChange\n      }, function (context) {\n        return react_1.default.createElement(ComponentToWrap, __assign({}, _this.props, {\n          web3: context\n        }));\n      });\n    };\n\n    return WithWeb3;\n  }(react_1.Component);\n\n  ;\n  WithWeb3.displayName = \"withWeb3(\" + (ComponentToWrap.displayName || ComponentToWrap.name || 'Component') + \")\";\n  return WithWeb3;\n}\n\nexports.withWeb3 = withWeb3;","map":{"version":3,"sources":["../src/provider.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar ethers_1 = require(\"ethers\");\nvar context_1 = __importDefault(require(\"./context\"));\nvar manager_1 = __importDefault(require(\"./manager\"));\nfunction useWeb3Context() {\n    return react_1.useContext(context_1.default);\n}\nexports.useWeb3Context = useWeb3Context;\nfunction Web3Provider(_a) {\n    var connectors = _a.connectors, libraryName = _a.libraryName, Web3 = _a.web3Api, children = _a.children;\n    var _b = manager_1.default(connectors), active = _b.web3Initialized, web3State = _b.web3State, connector = _b.connector, setConnector = _b.setConnector, setFirstValidConnector = _b.setFirstValidConnector, unsetConnector = _b.unsetConnector, setError = _b.setError;\n    var connectorName = web3State.connectorName, provider = web3State.provider, networkId = web3State.networkId, account = web3State.account, error = web3State.error;\n    var providerToInject = provider &&\n        (function () {\n            if (ethers_1.ethers.providers.Provider.isProvider(provider)) {\n                return provider;\n            }\n            else {\n                switch (libraryName) {\n                    case 'ethers.js':\n                        return new ethers_1.ethers.providers.Web3Provider(provider);\n                    case 'web3.js':\n                        return new Web3(provider);\n                    case undefined:\n                    case null:\n                        return provider;\n                    default:\n                        return libraryName(provider);\n                }\n            }\n        })();\n    var context = {\n        active: active,\n        connectorName: connectorName,\n        connector: connector,\n        library: providerToInject,\n        networkId: networkId,\n        account: account,\n        error: error,\n        setConnector: setConnector,\n        setFirstValidConnector: setFirstValidConnector,\n        unsetConnector: unsetConnector,\n        setError: setError\n    };\n    return react_1.default.createElement(context_1.default.Provider, { value: context }, children);\n}\nexports.default = Web3Provider;\nfunction Web3Consumer(_a) {\n    var _b = _a.recreateOnNetworkChange, recreateOnNetworkChange = _b === void 0 ? true : _b, _c = _a.recreateOnAccountChange, recreateOnAccountChange = _c === void 0 ? true : _c, children = _a.children;\n    return (react_1.default.createElement(context_1.default.Consumer, null, function (context) { return (react_1.default.createElement(react_1.Fragment, { key: (recreateOnNetworkChange && context.networkId) || undefined },\n        react_1.default.createElement(react_1.Fragment, { key: (recreateOnAccountChange && context.account) || undefined }, children(context)))); }));\n}\nexports.Web3Consumer = Web3Consumer;\nfunction withWeb3(ComponentToWrap, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.recreateOnNetworkChange, recreateOnNetworkChange = _c === void 0 ? true : _c, _d = _b.recreateOnAccountChange, recreateOnAccountChange = _d === void 0 ? true : _d;\n    var WithWeb3 = /** @class */ (function (_super) {\n        __extends(WithWeb3, _super);\n        function WithWeb3() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        WithWeb3.prototype.render = function () {\n            var _this = this;\n            return (react_1.default.createElement(Web3Consumer, { recreateOnNetworkChange: recreateOnNetworkChange, recreateOnAccountChange: recreateOnAccountChange }, function (context) { return react_1.default.createElement(ComponentToWrap, __assign({}, _this.props, { web3: context })); }));\n        };\n        return WithWeb3;\n    }(react_1.Component));\n    ;\n    WithWeb3.displayName = \"withWeb3(\" + (ComponentToWrap.displayName || ComponentToWrap.name || 'Component') + \")\";\n    return WithWeb3;\n}\nexports.withWeb3 = withWeb3;\n//# sourceMappingURL=provider.js.map"]},"metadata":{},"sourceType":"script"}